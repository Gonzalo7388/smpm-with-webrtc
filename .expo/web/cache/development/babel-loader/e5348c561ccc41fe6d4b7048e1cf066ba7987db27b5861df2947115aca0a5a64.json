{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState } from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { mediaDevices, RTCView } from \"react-native-webrtc\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction App() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    stream = _useState2[0],\n    setStream = _useState2[1];\n  var start = function () {\n    var _ref = _asyncToGenerator(function* () {\n      console.log(\"start\");\n      if (!stream) {\n        var s;\n        try {\n          s = yield mediaDevices.getUserMedia({\n            video: true\n          });\n          setStream(s);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    });\n    return function start() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var stop = function stop() {\n    console.log(\"stop\");\n    if (stream) {\n      stream.release();\n      setStream(null);\n    }\n  };\n  return _jsxs(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: [_jsx(StatusBar, {\n      barStyle: \"dark-content\"\n    }), _jsx(View, {\n      style: {\n        flex: 1\n      },\n      children: stream && _jsx(RTCView, {\n        streamURL: stream.toURL(),\n        style: {\n          flex: 1\n        }\n      })\n    }), _jsxs(View, {\n      style: {\n        flexDirection: \"row\",\n        justifyContent: \"space-around\"\n      },\n      children: [_jsx(Button, {\n        title: \"Start\",\n        onPress: start\n      }), _jsx(Button, {\n        title: \"Stop\",\n        onPress: stop\n      })]\n    })]\n  });\n}\nexport default App;","map":{"version":3,"names":["useState","Button","SafeAreaView","StatusBar","StyleSheet","View","mediaDevices","RTCView","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","stream","setStream","start","_ref","_asyncToGenerator","console","log","s","getUserMedia","video","e","error","apply","arguments","stop","release","style","flex","children","barStyle","streamURL","toURL","flexDirection","justifyContent","title","onPress"],"sources":["/workspaces/smpm-with-webrtc/App.js"],"sourcesContent":["import { useState } from \"react\";\nimport {\n  Button,\n  SafeAreaView,\n  StatusBar,\n  StyleSheet,\n  View,\n} from \"react-native\";\nimport { mediaDevices, RTCView } from \"react-native-webrtc\";\n\nfunction App() {\n  const [stream, setStream] = useState(null);\n\n  const start = async () => {\n    console.log(\"start\");\n    if (!stream) {\n      let s;\n      try {\n        s = await mediaDevices.getUserMedia({ video: true });\n        setStream(s);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  };\n\n  const stop = () => {\n    console.log(\"stop\");\n    if (stream) {\n      stream.release();\n      setStream(null);\n    }\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1 }}>\n      <StatusBar barStyle=\"dark-content\" />\n      <View style={{ flex: 1 }}>\n        {stream && <RTCView streamURL={stream.toURL()} style={{ flex: 1 }} />}\n      </View>\n      <View style={{ flexDirection: \"row\", justifyContent: \"space-around\" }}>\n        <Button title=\"Start\" onPress={start} />\n        <Button title=\"Stop\" onPress={stop} />\n      </View>\n    </SafeAreaView>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAAC,OAAAC,MAAA;AAAA,OAAAC,YAAA;AAAA,OAAAC,SAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAQjC,SAASC,YAAY,EAAEC,OAAO,QAAQ,qBAAqB;AAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAE5D,SAASC,GAAGA,CAAA,EAAG;EACb,IAAAC,SAAA,GAA4Bb,QAAQ,CAAC,IAAI,CAAC;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAnCG,MAAM,GAAAF,UAAA;IAAEG,SAAS,GAAAH,UAAA;EAExB,IAAMI,KAAK;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;MACxBC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpB,IAAI,CAACN,MAAM,EAAE;QACX,IAAIO,CAAC;QACL,IAAI;UACFA,CAAC,SAASjB,YAAY,CAACkB,YAAY,CAAC;YAAEC,KAAK,EAAE;UAAK,CAAC,CAAC;UACpDR,SAAS,CAACM,CAAC,CAAC;QACd,CAAC,CAAC,OAAOG,CAAC,EAAE;UACVL,OAAO,CAACM,KAAK,CAACD,CAAC,CAAC;QAClB;MACF;IACF,CAAC;IAAA,gBAXKR,KAAKA,CAAA;MAAA,OAAAC,IAAA,CAAAS,KAAA,OAAAC,SAAA;IAAA;EAAA,GAWV;EAED,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAS;IACjBT,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACnB,IAAIN,MAAM,EAAE;MACVA,MAAM,CAACe,OAAO,CAAC,CAAC;MAChBd,SAAS,CAAC,IAAI,CAAC;IACjB;EACF,CAAC;EAED,OACEN,KAAA,CAACT,YAAY;IAAC8B,KAAK,EAAE;MAAEC,IAAI,EAAE;IAAE,CAAE;IAAAC,QAAA,GAC/BzB,IAAA,CAACN,SAAS;MAACgC,QAAQ,EAAC;IAAc,CAAE,CAAC,EACrC1B,IAAA,CAACJ,IAAI;MAAC2B,KAAK,EAAE;QAAEC,IAAI,EAAE;MAAE,CAAE;MAAAC,QAAA,EACtBlB,MAAM,IAAIP,IAAA,CAACF,OAAO;QAAC6B,SAAS,EAAEpB,MAAM,CAACqB,KAAK,CAAC,CAAE;QAACL,KAAK,EAAE;UAAEC,IAAI,EAAE;QAAE;MAAE,CAAE;IAAC,CACjE,CAAC,EACPtB,KAAA,CAACN,IAAI;MAAC2B,KAAK,EAAE;QAAEM,aAAa,EAAE,KAAK;QAAEC,cAAc,EAAE;MAAe,CAAE;MAAAL,QAAA,GACpEzB,IAAA,CAACR,MAAM;QAACuC,KAAK,EAAC,OAAO;QAACC,OAAO,EAAEvB;MAAM,CAAE,CAAC,EACxCT,IAAA,CAACR,MAAM;QAACuC,KAAK,EAAC,MAAM;QAACC,OAAO,EAAEX;MAAK,CAAE,CAAC;IAAA,CAClC,CAAC;EAAA,CACK,CAAC;AAEnB;AAEA,eAAelB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}